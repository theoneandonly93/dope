(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{235:function(e,t,s){Promise.resolve().then(s.bind(s,4637))},4637:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var a=s(7437),l=s(7133);try{let e="undefined"!=typeof globalThis?globalThis:window;e.Buffer||(e.Buffer=l.Buffer)}catch(e){}s(5610);var n=s(2265),r=s(9265),i=s(1396),o=s.n(i),c=s(4033);let d=[{href:"/",label:"Home",icon:e=>(0,a.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M3 10.5L12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1v-10.5z",fill:e?"#ffffff":"#9aa0a6"})})},{href:"/card",label:"Card",icon:e=>(0,a.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("rect",{x:"3",y:"6",width:"18",height:"12",rx:"2",stroke:e?"#ffffff":"#9aa0a6",strokeWidth:"2"}),(0,a.jsx)("rect",{x:"6",y:"12",width:"6",height:"2",fill:e?"#ffffff":"#9aa0a6"}),(0,a.jsx)("rect",{x:"14",y:"12",width:"4",height:"2",fill:e?"#ffffff":"#9aa0a6"}),(0,a.jsx)("rect",{x:"3",y:"8",width:"18",height:"2",fill:e?"#ffffff":"#9aa0a6"})]})},{href:"/transactions",label:"Activity",icon:e=>(0,a.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M4 12l4 4 8-8",stroke:e?"#ffffff":"#9aa0a6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M20 7v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7",stroke:e?"#ffffff":"#9aa0a6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})},{href:"/wallet/chat",label:"Chat",icon:e=>(0,a.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M20 12c0 4-3.582 7-8 7-0.69 0-1.36-0.07-2-0.2L6 20l1.2-3C5.85 15.9 4 14.17 4 12 4 8 7.582 5 12 5s8 3 8 7z",stroke:e?"#ffffff":"#9aa0a6",strokeWidth:"2",strokeLinejoin:"round",fill:"none"}),(0,a.jsx)("circle",{cx:"10",cy:"12",r:"1",fill:e?"#ffffff":"#9aa0a6"}),(0,a.jsx)("circle",{cx:"13",cy:"12",r:"1",fill:e?"#ffffff":"#9aa0a6"}),(0,a.jsx)("circle",{cx:"16",cy:"12",r:"1",fill:e?"#ffffff":"#9aa0a6"})]})}];function h(){let e=(0,c.usePathname)();return(0,a.jsx)("nav",{className:"fixed bottom-0 inset-x-0 z-40",children:(0,a.jsx)("div",{className:"mx-auto w-full max-w-md md:max-w-lg lg:max-w-xl",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:(0,a.jsx)("div",{className:"m-3 rounded-2xl glass border border-white/5 backdrop-blur px-4 py-2 flex items-center justify-between bg-white/5",children:d.map(t=>{let s=e===t.href;return(0,a.jsxs)(o(),{href:t.href,className:"flex flex-col items-center gap-1 py-1 px-2",children:[t.icon(s),(0,a.jsx)("span",{className:"text-[10px] ".concat(s?"text-white":"text-white/60"),children:t.label})]},t.href)})})})})}var f=s(3861);function x(e){let{open:t,onClose:s}=e,l=(0,c.useRouter)(),i=(0,r.Ek)(),o=(null==i?void 0:i.address)||null,d=(null==i?void 0:i.logout)||(()=>{}),[h,x]=(0,n.useState)("profile"),[u,m]=(0,n.useState)(""),[w,p]=(0,n.useState)(""),[b,g]=(0,n.useState)(""),[v,j]=(0,n.useState)(""),[y,N]=(0,n.useState)(""),[k,C]=(0,n.useState)(""),[S,E]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(!t)return;E((0,f.MX)());let e=(0,f.MI)();m((null==e?void 0:e.scheme)||"")},[t]);let P=async()=>{try{await navigator.clipboard.writeText(o||""),N("Address copied"),setTimeout(()=>N(""),1500)}catch(e){}},A=async()=>{C(""),N("");try{if("password"===u){if(!w||!b||b!==v)throw Error("Check passwords");await (0,f.Cp)(w,b),N("Password updated")}else if("device"===u){if(!b||b!==v)throw Error("Enter and confirm new password");await (0,f.AG)(b),N("Password set for wallet"),m("password")}p(""),g(""),j("")}catch(e){C((null==e?void 0:e.message)||"Failed to update password")}},W=e=>{(0,f.sm)(e),E((0,f.MX)()),s(),l.replace("/")};return(0,a.jsxs)("div",{className:"fixed inset-0 ".concat(t?"":"pointer-events-none"," z-50"),children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/60 transition-opacity ".concat(t?"opacity-100":"opacity-0"),onClick:s}),(0,a.jsxs)("aside",{className:"absolute inset-y-0 left-0 w-[82vw] max-w-[340px] bg-[#12131a] border-r border-white/10 transform transition-transform ".concat(t?"translate-x-0":"-translate-x-full"),children:[(0,a.jsxs)("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("img",{src:"/logo-192.png",alt:"logo",className:"w-6 h-6"}),(0,a.jsx)("span",{className:"font-semibold",children:"Menu"})]}),(0,a.jsx)("button",{onClick:s,className:"text-white/70","aria-label":"Close",children:"\xd7"})]}),(0,a.jsx)("div",{className:"px-4 pt-3 text-sm",children:(0,a.jsxs)("div",{className:"scroll-x-invisible flex gap-3 pr-1",children:[(0,a.jsx)("button",{className:"px-3 py-2 rounded-lg ".concat("profile"===h?"bg-white/10":""),onClick:()=>x("profile"),children:"Profile"}),(0,a.jsx)("button",{className:"px-3 py-2 rounded-lg ".concat("wallets"===h?"bg-white/10":""),onClick:()=>x("wallets"),children:"Wallets"}),(0,a.jsx)("button",{className:"px-3 py-2 rounded-lg ".concat("settings"===h?"bg-white/10":""),onClick:()=>x("settings"),children:"Settings"}),(0,a.jsx)("button",{className:"px-3 py-2 rounded-lg ".concat("developer"===h?"bg-white/10":""),onClick:()=>x("developer"),children:"Developer"})]})}),(0,a.jsxs)("div",{className:"p-4 space-y-4 overflow-y-auto max-h-[calc(100vh-120px)]",children:["profile"===h&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-white/60",children:"Active Address"}),(0,a.jsx)("div",{className:"font-mono text-sm break-all",children:o}),(0,a.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,a.jsx)("button",{className:"btn",onClick:P,children:"Copy"}),(0,a.jsx)("button",{className:"btn",onClick:()=>{d(),s()},children:"Logout"})]}),y&&(0,a.jsx)("div",{className:"text-xs text-green-400 mt-2",children:y})]}),(0,a.jsxs)("div",{className:"glass rounded-xl p-3 border border-white/10",children:[(0,a.jsx)("div",{className:"font-semibold mb-2",children:"password"===u?"Change Password":"Set Password"}),"password"===u&&(0,a.jsx)("input",{type:"password",placeholder:"Current password",value:w,onChange:e=>p(e.target.value),className:"w-full mb-2 bg-white/5 border border-white/10 rounded-lg px-3 py-2 outline-none"}),(0,a.jsx)("input",{type:"password",placeholder:"New password",value:b,onChange:e=>g(e.target.value),className:"w-full mb-2 bg-white/5 border border-white/10 rounded-lg px-3 py-2 outline-none"}),(0,a.jsx)("input",{type:"password",placeholder:"Confirm new password",value:v,onChange:e=>j(e.target.value),className:"w-full mb-2 bg-white/5 border border-white/10 rounded-lg px-3 py-2 outline-none"}),k&&(0,a.jsx)("div",{className:"text-xs text-red-400 mb-2",children:k}),(0,a.jsx)("button",{className:"btn w-full",onClick:A,children:"password"===u?"Update Password":"Set Password"})]})]}),"wallets"===h&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"font-semibold",children:"Wallets"}),(0,a.jsx)("button",{className:"btn",onClick:()=>{s(),l.push("/wallet/add")},children:"+ Add"})]}),(0,a.jsx)("div",{className:"space-y-2",children:S.map(e=>(0,a.jsxs)("button",{onClick:()=>W(e.id),className:"w-full text-left p-3 rounded-lg border ".concat(o===e.pubkey?"border-white/40 bg-white/5":"border-white/10 bg-white/0"),children:[(0,a.jsx)("div",{className:"text-xs text-white/60",children:e.name||"Wallet"}),(0,a.jsx)("div",{className:"font-mono text-sm break-all",children:e.pubkey})]},e.id))})]}),"settings"===h&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"text-sm text-white/80",children:"Manage your wallet preferences."}),(0,a.jsx)("button",{className:"btn",onClick:()=>{s(),l.push("/settings")},children:"Open Settings"})]}),"developer"===h&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"text-sm text-white/80",children:"Developer options for network selection."}),(0,a.jsx)("button",{className:"btn",onClick:()=>{s(),l.push("/settings/developer")},children:"Open Developer Settings"})]})]})]})]})}function u(e){let{children:t}=e,[s,l]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if("serviceWorker"in navigator){let e=()=>navigator.serviceWorker.register("/sw.js").catch(()=>{});return window.addEventListener("load",e),()=>window.removeEventListener("load",e)}},[]),(0,a.jsxs)("html",{lang:"en",children:[(0,a.jsxs)("head",{children:[(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"}),(0,a.jsx)("meta",{name:"theme-color",content:"#2a2b3a"}),(0,a.jsx)("link",{rel:"manifest",href:"/manifest.json"}),(0,a.jsx)("link",{rel:"apple-touch-icon",href:"/logo-192.png"}),(0,a.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),(0,a.jsx)("meta",{name:"apple-mobile-web-app-status-bar-style",content:"black-translucent"}),(0,a.jsx)("title",{children:"DOPE"})]}),(0,a.jsx)("body",{className:"min-h-[100dvh] bg-[#0b0c10] text-white",children:(0,a.jsxs)(r.nS,{children:[(0,a.jsx)(function(){return(0,r.Ek)(),(0,a.jsx)("header",{className:"sticky top-0 z-30 backdrop-blur glass px-4 py-3 border-b border-white/5",children:(0,a.jsxs)("div",{className:"mx-auto w-full max-w-md md:max-w-lg lg:max-w-xl flex items-center justify-between",children:[(0,a.jsxs)("button",{onClick:()=>l(!0),className:"flex items-center gap-2",children:[(0,a.jsx)("img",{src:"/logo-192.png",alt:"logo",className:"w-6 h-6 rounded"}),(0,a.jsx)("span",{className:"font-semibold tracking-wide",children:"DOPE"})]}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)(o(),{href:"/wallet/add",className:"btn",children:"+ Add"})})]})})},{}),(0,a.jsx)("main",{className:"mx-auto w-full max-w-md md:max-w-lg lg:max-w-xl pb-20 px-4 pt-4",style:{paddingBottom:"calc(6rem + env(safe-area-inset-bottom))"},children:t}),(0,a.jsx)(h,{}),(0,a.jsx)(x,{open:s,onClose:()=>l(!1)})]})})]})}},9265:function(e,t,s){"use strict";s.d(t,{Ek:function(){return h},Os:function(){return d},nS:function(){return c}});var a=s(7437),l=s(2265),n=s(8870),r=s.n(n),i=s(3861);let o=(0,l.createContext)(null);function c(e){let{children:t}=e,[n,c]=(0,l.useState)(null),[d,h]=(0,l.useState)(null),[f,x]=(0,l.useState)((0,i.Ru)()),[u,m]=(0,l.useState)(!1),[w,p]=(0,l.useState)(!1),[b,g]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=(0,i.MI)();e?(c(e.pubkey),p(!0)):p(!1),x((0,i.Ru)()),(0,i.SX)().then(m).catch(()=>m(!1)),(async()=>{try{if((null==e?void 0:e.scheme)==="device"){let e=await (0,i.s6)();h(e),x(!0)}}catch(e){}})();let t=()=>{let e=(0,i.MI)();e&&(c(e.pubkey),p(!0))};return window.addEventListener("dope:store",t),()=>{window.removeEventListener("dope:store",t)}},[]),(0,l.useEffect)(()=>{g(!0)},[]);let v=async e=>{let t=await (0,i.Z9)(e);return c(t.address),p(!0),t},j=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"phantom",a=arguments.length>3?arguments[3]:void 0,l="string"==typeof s&&s.startsWith("m/"),n=l?await (0,i.ir)(e,t,s,a):await (0,i.o4)(e,t,s,a);return c(n.address),p(!0),n},y=async(e,t)=>{let a=null,l=e.trim();try{if(l.startsWith("[")){let e=JSON.parse(l);Array.isArray(e)&&(a=new Uint8Array(e.map(e=>Number(e))))}else if(/^[A-Za-z0-9+/=]+$/.test(l)&&l.includes("=")){let e=atob(l),t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);a=t}else/^[1-9A-HJ-NP-Za-km-z]+$/.test(l)&&(a=r().decode(l))}catch(e){}if(!a)throw Error("Invalid keypair input. Paste JSON array, base58, or base64 secret key.");let{importWalletFromSecretKey:n}=await Promise.resolve().then(s.bind(s,3861)),i=await n(a,t);return c(i.address),p(!0),i},N=async e=>{let t=await (0,i.fK)(e);h(t),x(!0)},k=async()=>{if(!u)return!1;let e=await (0,i.B9)();return!!(e&&(0,i.Ru)())&&(x(!0),!0)};return(0,a.jsx)(o.Provider,{value:{address:n,unlocked:f,keypair:d,hasWallet:w,ready:b,createWallet:v,importWallet:j,importKeypair:y,unlock:N,tryBiometricUnlock:k,lock:()=>{h(null),x(!1)},logout:()=>{h(null),(0,i.QD)(),x(!1),c(null),p(!1)}},children:t})}function d(){let e=(0,l.useContext)(o);if(!e)throw Error("useWallet must be used within WalletProvider");return e}function h(){return(0,l.useContext)(o)}},5610:function(){},4033:function(e,t,s){e.exports=s(8165)}},function(e){e.O(0,[814,727,847,711,971,596,744],function(){return e(e.s=235)}),_N_E=e.O()}]);