(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[719],{4707:function(e,t,s){Promise.resolve().then(s.bind(s,3590))},3590:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var r=s(7437),n=s(2265),a=s(4033),l=s(3861),i=s(9265);function u(){let e=(0,a.useRouter)(),{hasWallet:t}=(0,i.Os)(),[s,u]=(0,n.useState)(""),[c,o]=(0,n.useState)(""),[d,h]=(0,n.useState)(""),[x,f]=(0,n.useState)(!1),[m,v]=(0,n.useState)(""),[w,y]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(t){e.replace("/");return}(async()=>{try{f(!0);let{mnemonic:t,address:s,keypair:r}=await (0,l.ql)();u(t),o(s),h(function(e){let t="";for(let s=0;s<e.length;s++)t+=String.fromCharCode(e[s]);return btoa(t)}(r.secretKey)),e.replace("/")}catch(e){v((null==e?void 0:e.message)||"Failed to create wallet")}finally{f(!1)}})()},[t,e]);let b=(0,n.useMemo)(()=>w?d:d.replace(/.{6}$/g,"******"),[d,w]);return(0,r.jsxs)("div",{className:"space-y-5 pb-24",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold",children:"Your New Wallet"}),(0,r.jsxs)("div",{className:"glass rounded-2xl p-4 border border-white/5 space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-white/60",children:"Public Address"}),(0,r.jsx)("div",{className:"font-mono break-all text-sm",children:c||"Generating..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-white/60 mb-1",children:"Seed Phrase"}),(0,r.jsx)("div",{className:"font-mono text-sm leading-7 select-all",children:s||"Generating..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-white/60 mb-1",children:"Private Key (base64)"}),(0,r.jsx)("div",{className:"font-mono break-all text-sm select-all",children:b||"Generating..."}),(0,r.jsxs)("button",{onClick:()=>y(e=>!e),className:"mt-2 text-xs underline text-white/70",children:[w?"Hide":"Show"," private key"]})]})]}),(0,r.jsx)("div",{className:"text-white/70 text-sm",children:"Your wallet is being created and saved. You will be redirected to your wallet dashboard automatically."}),m&&(0,r.jsx)("div",{className:"text-[12px] text-red-400",children:m})]})}},9265:function(e,t,s){"use strict";s.d(t,{Ek:function(){return d},Os:function(){return o},nS:function(){return c}});var r=s(7437),n=s(2265),a=s(8870),l=s.n(a),i=s(3861);let u=(0,n.createContext)(null);function c(e){let{children:t}=e,[a,c]=(0,n.useState)(null),[o,d]=(0,n.useState)(null),[h,x]=(0,n.useState)((0,i.Ru)()),[f,m]=(0,n.useState)(!1),[v,w]=(0,n.useState)(!1),[y,b]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=(0,i.MI)();e?(c(e.pubkey),w(!0)):w(!1),x((0,i.Ru)()),(0,i.SX)().then(m).catch(()=>m(!1)),(async()=>{try{if((null==e?void 0:e.scheme)==="device"){let e=await (0,i.s6)();d(e),x(!0)}}catch(e){}})();let t=()=>{let e=(0,i.MI)();e&&(c(e.pubkey),w(!0))};return window.addEventListener("dope:store",t),()=>{window.removeEventListener("dope:store",t)}},[]),(0,n.useEffect)(()=>{b(!0)},[]);let p=async e=>{let t=await (0,i.Z9)(e);return c(t.address),w(!0),t},N=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"phantom",r=arguments.length>3?arguments[3]:void 0,n="string"==typeof s&&s.startsWith("m/"),a=n?await (0,i.ir)(e,t,s,r):await (0,i.o4)(e,t,s,r);return c(a.address),w(!0),a},S=async(e,t)=>{let r=null,n=e.trim();try{if(n.startsWith("[")){let e=JSON.parse(n);Array.isArray(e)&&(r=new Uint8Array(e.map(e=>Number(e))))}else if(/^[A-Za-z0-9+/=]+$/.test(n)&&n.includes("=")){let e=atob(n),t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);r=t}else/^[1-9A-HJ-NP-Za-km-z]+$/.test(n)&&(r=l().decode(n))}catch(e){}if(!r)throw Error("Invalid keypair input. Paste JSON array, base58, or base64 secret key.");let{importWalletFromSecretKey:a}=await Promise.resolve().then(s.bind(s,3861)),i=await a(r,t);return c(i.address),w(!0),i},g=async e=>{let t=await (0,i.fK)(e);d(t),x(!0)},j=async()=>{if(!f)return!1;let e=await (0,i.B9)();return!!(e&&(0,i.Ru)())&&(x(!0),!0)};return(0,r.jsx)(u.Provider,{value:{address:a,unlocked:h,keypair:o,hasWallet:v,ready:y,createWallet:p,importWallet:N,importKeypair:S,unlock:g,tryBiometricUnlock:j,lock:()=>{d(null),x(!1)},logout:()=>{d(null),(0,i.QD)(),x(!1),c(null),w(!1)}},children:t})}function o(){let e=(0,n.useContext)(u);if(!e)throw Error("useWallet must be used within WalletProvider");return e}function d(){return(0,n.useContext)(u)}},4033:function(e,t,s){e.exports=s(8165)}},function(e){e.O(0,[814,727,711,971,596,744],function(){return e(e.s=4707)}),_N_E=e.O()}]);