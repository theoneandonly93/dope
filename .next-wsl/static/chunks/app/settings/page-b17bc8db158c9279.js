(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{1491:function(e,t,s){Promise.resolve().then(s.bind(s,2732))},2732:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(7437),n=s(2265),l=s(4033),r=s(9265),i=s(3861);function c(){let e=(0,l.useRouter)(),{address:t,unlocked:s}=(0,r.Os)(),[c,o]=(0,n.useState)(""),[d,u]=(0,n.useState)(""),[h,x]=(0,n.useState)(!1),[m,v]=(0,n.useState)(""),[f,w]=(0,n.useState)(""),[p,y]=(0,n.useState)(""),[b,N]=(0,n.useState)(null),[S,g]=(0,n.useState)(null),[j,k]=(0,n.useState)(!1);(0,n.useEffect)(()=>{try{let e=(0,i.h8)();(null==e?void 0:e.name)&&o(e.name);let t=(0,i.MI)();(null==t?void 0:t.scheme)&&u(t.scheme)}catch(e){}},[]);let C=async()=>{w(""),v(""),x(!0);try{(0,i.LJ)(c||""),v("Saved"),setTimeout(()=>v(""),1500)}catch(e){w((null==e?void 0:e.message)||"Failed to save")}finally{x(!1)}},E=async()=>{w(""),v(""),k(!0);try{let e=await (0,i.q7)("password"===d?p:void 0);N(e.mnemonic),g(e.secretKeyB64)}catch(e){w((null==e?void 0:e.message)||"Failed to reveal secrets")}finally{k(!1)}},A=async e=>{if(e)try{await navigator.clipboard.writeText(e),v("Copied"),setTimeout(()=>v(""),1200)}catch(e){}};return(0,a.jsxs)("div",{className:"space-y-6 pb-24",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Settings"}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-5 border border-white/10 space-y-3",children:[(0,a.jsx)("div",{className:"text-xs text-white/60",children:"Display Name"}),(0,a.jsx)("input",{value:c,onChange:e=>o(e.target.value),placeholder:"Optional name for this wallet",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 outline-none"}),f&&(0,a.jsx)("div",{className:"text-xs text-red-400",children:f}),m&&(0,a.jsx)("div",{className:"text-xs text-green-400",children:m}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{className:"btn",onClick:C,disabled:h,children:h?"Saving...":"Save"}),(0,a.jsx)("button",{className:"btn",onClick:()=>e.back(),children:"Back"})]})]}),(0,a.jsxs)("div",{className:"glass rounded-2xl p-5 border border-white/10 space-y-3",children:[(0,a.jsx)("div",{className:"text-sm font-semibold",children:"Sensitive Info"}),(0,a.jsx)("div",{className:"text-xs text-white/70",children:"Reveal your seed phrase and private key only in a secure environment. Never share with anyone."}),"password"===d&&(0,a.jsx)("input",{type:"password",value:p,onChange:e=>y(e.target.value),placeholder:"Enter wallet password",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-2 outline-none"}),(0,a.jsx)("button",{className:"btn",onClick:E,disabled:j||"password"===d&&p.length<4,children:j?"Revealing...":"Reveal Secrets"}),b&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("div",{className:"text-xs text-white/60 mb-1",children:"Seed Phrase"}),(0,a.jsx)("div",{className:"font-mono text-sm leading-7 select-all break-words",children:b}),(0,a.jsx)("button",{className:"text-xs underline mt-1 text-white/70",onClick:()=>A(b),children:"Copy seed phrase"})]}),S&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("div",{className:"text-xs text-white/60 mb-1",children:"Secret Key (base64)"}),(0,a.jsx)("div",{className:"font-mono text-sm break-all select-all",children:S}),(0,a.jsx)("button",{className:"text-xs underline mt-1 text-white/70",onClick:()=>A(S),children:"Copy secret key"})]})]})]})}},9265:function(e,t,s){"use strict";s.d(t,{Ek:function(){return u},Os:function(){return d},nS:function(){return o}});var a=s(7437),n=s(2265),l=s(8870),r=s.n(l),i=s(3861);let c=(0,n.createContext)(null);function o(e){let{children:t}=e,[l,o]=(0,n.useState)(null),[d,u]=(0,n.useState)(null),[h,x]=(0,n.useState)((0,i.Ru)()),[m,v]=(0,n.useState)(!1),[f,w]=(0,n.useState)(!1),[p,y]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=(0,i.MI)();e?(o(e.pubkey),w(!0)):w(!1),x((0,i.Ru)()),(0,i.SX)().then(v).catch(()=>v(!1)),(async()=>{try{if((null==e?void 0:e.scheme)==="device"){let e=await (0,i.s6)();u(e),x(!0)}}catch(e){}})();let t=()=>{let e=(0,i.MI)();e&&(o(e.pubkey),w(!0))};return window.addEventListener("dope:store",t),()=>{window.removeEventListener("dope:store",t)}},[]),(0,n.useEffect)(()=>{y(!0)},[]);let b=async e=>{let t=await (0,i.Z9)(e);return o(t.address),w(!0),t},N=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"phantom",a=arguments.length>3?arguments[3]:void 0,n="string"==typeof s&&s.startsWith("m/"),l=n?await (0,i.ir)(e,t,s,a):await (0,i.o4)(e,t,s,a);return o(l.address),w(!0),l},S=async(e,t)=>{let a=null,n=e.trim();try{if(n.startsWith("[")){let e=JSON.parse(n);Array.isArray(e)&&(a=new Uint8Array(e.map(e=>Number(e))))}else if(/^[A-Za-z0-9+/=]+$/.test(n)&&n.includes("=")){let e=atob(n),t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);a=t}else/^[1-9A-HJ-NP-Za-km-z]+$/.test(n)&&(a=r().decode(n))}catch(e){}if(!a)throw Error("Invalid keypair input. Paste JSON array, base58, or base64 secret key.");let{importWalletFromSecretKey:l}=await Promise.resolve().then(s.bind(s,3861)),i=await l(a,t);return o(i.address),w(!0),i},g=async e=>{let t=await (0,i.fK)(e);u(t),x(!0)},j=async()=>{if(!m)return!1;let e=await (0,i.B9)();return!!(e&&(0,i.Ru)())&&(x(!0),!0)};return(0,a.jsx)(c.Provider,{value:{address:l,unlocked:h,keypair:d,hasWallet:f,ready:p,createWallet:b,importWallet:N,importKeypair:S,unlock:g,tryBiometricUnlock:j,lock:()=>{u(null),x(!1)},logout:()=>{u(null),(0,i.QD)(),x(!1),o(null),w(!1)}},children:t})}function d(){let e=(0,n.useContext)(c);if(!e)throw Error("useWallet must be used within WalletProvider");return e}function u(){return(0,n.useContext)(c)}},4033:function(e,t,s){e.exports=s(8165)}},function(e){e.O(0,[814,727,711,971,596,744],function(){return e(e.s=1491)}),_N_E=e.O()}]);