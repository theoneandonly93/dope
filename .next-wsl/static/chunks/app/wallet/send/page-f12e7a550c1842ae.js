(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{6446:function(e,t,n){Promise.resolve().then(n.bind(n,8491))},8491:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(7437),a=n(2265),s=n(4033),l=n(9265),u=n(3861),i=n(3438);function o(){let e=(0,s.useRouter)(),{unlocked:t,keypair:n}=(0,l.Os)(),[o,c]=(0,a.useState)(""),[d,f]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),[w,m]=(0,a.useState)(""),[y,b]=(0,a.useState)(!1),[v,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t||e.replace("/unlock")},[t,e]);let S=async e=>{if(e.preventDefault(),p(""),m(""),!n)return p("Wallet is locked");let t=parseFloat(d);if(!(t>0))return p("Enter a valid amount");try{new i.nh(o.trim()),x(!0)}catch(e){return x(!1),p("Invalid recipient address")}b(!0);try{let e=await (0,u.Vx)(n,o.trim(),t);m(e)}catch(e){p((null==e?void 0:e.message)||"Failed to send")}finally{b(!1)}};return(0,r.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold",children:"Send DOPE"}),(0,r.jsx)("input",{className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-3 outline-none focus:border-[#a58cff]",placeholder:"Recipient address",value:o,onChange:e=>{c(e.target.value);try{new i.nh(e.target.value.trim()),x(!0)}catch(e){x(!1)}}}),(0,r.jsx)("input",{className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-3 outline-none focus:border-[#a58cff]",placeholder:"Amount (DOPE)",value:d,onChange:e=>f(e.target.value)}),h&&(0,r.jsx)("div",{className:"text-[12px] text-red-400",children:h}),w&&(0,r.jsxs)("div",{className:"text-[12px] text-green-400 break-all",children:["Sent. Signature: ",w]}),(0,r.jsx)("button",{disabled:y||!v,className:"w-full btn disabled:opacity-50",children:y?"Sending...":"Send"})]})}},9265:function(e,t,n){"use strict";n.d(t,{Ek:function(){return d},Os:function(){return c},nS:function(){return o}});var r=n(7437),a=n(2265),s=n(8870),l=n.n(s),u=n(3861);let i=(0,a.createContext)(null);function o(e){let{children:t}=e,[s,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[f,h]=(0,a.useState)((0,u.Ru)()),[p,w]=(0,a.useState)(!1),[m,y]=(0,a.useState)(!1),[b,v]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=(0,u.MI)();e?(o(e.pubkey),y(!0)):y(!1),h((0,u.Ru)()),(0,u.SX)().then(w).catch(()=>w(!1)),(async()=>{try{if((null==e?void 0:e.scheme)==="device"){let e=await (0,u.s6)();d(e),h(!0)}}catch(e){}})();let t=()=>{let e=(0,u.MI)();e&&(o(e.pubkey),y(!0))};return window.addEventListener("dope:store",t),()=>{window.removeEventListener("dope:store",t)}},[]),(0,a.useEffect)(()=>{v(!0)},[]);let x=async e=>{let t=await (0,u.Z9)(e);return o(t.address),y(!0),t},S=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"phantom",r=arguments.length>3?arguments[3]:void 0,a="string"==typeof n&&n.startsWith("m/"),s=a?await (0,u.ir)(e,t,n,r):await (0,u.o4)(e,t,n,r);return o(s.address),y(!0),s},g=async(e,t)=>{let r=null,a=e.trim();try{if(a.startsWith("[")){let e=JSON.parse(a);Array.isArray(e)&&(r=new Uint8Array(e.map(e=>Number(e))))}else if(/^[A-Za-z0-9+/=]+$/.test(a)&&a.includes("=")){let e=atob(a),t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);r=t}else/^[1-9A-HJ-NP-Za-km-z]+$/.test(a)&&(r=l().decode(a))}catch(e){}if(!r)throw Error("Invalid keypair input. Paste JSON array, base58, or base64 secret key.");let{importWalletFromSecretKey:s}=await Promise.resolve().then(n.bind(n,3861)),u=await s(r,t);return o(u.address),y(!0),u},k=async e=>{let t=await (0,u.fK)(e);d(t),h(!0)},E=async()=>{if(!p)return!1;let e=await (0,u.B9)();return!!(e&&(0,u.Ru)())&&(h(!0),!0)};return(0,r.jsx)(i.Provider,{value:{address:s,unlocked:f,keypair:c,hasWallet:m,ready:b,createWallet:x,importWallet:S,importKeypair:g,unlock:k,tryBiometricUnlock:E,lock:()=>{d(null),h(!1)},logout:()=>{d(null),(0,u.QD)(),h(!1),o(null),y(!1)}},children:t})}function c(){let e=(0,a.useContext)(i);if(!e)throw Error("useWallet must be used within WalletProvider");return e}function d(){return(0,a.useContext)(i)}},4033:function(e,t,n){e.exports=n(8165)}},function(e){e.O(0,[814,727,711,971,596,744],function(){return e(e.s=6446)}),_N_E=e.O()}]);