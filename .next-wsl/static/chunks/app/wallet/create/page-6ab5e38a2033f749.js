(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[634],{7190:function(e,t,s){Promise.resolve().then(s.bind(s,1371))},1371:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(7437),n=s(2265),r=s(4033),l=s(9265);function i(){let e=(0,r.useRouter)(),{createWallet:t,unlock:s}=(0,l.Os)(),[i,c]=(0,n.useState)(""),[o,u]=(0,n.useState)("form"),[d,h]=(0,n.useState)(""),[f,m]=(0,n.useState)(""),[x,p]=(0,n.useState)(!1),[w,y]=(0,n.useState)(""),[b,v]=(0,n.useState)(!1),N=async e=>{e.preventDefault(),y(""),v(!0);try{let{mnemonic:e,address:s}=await t(i);h(e),m(s),u("show")}catch(e){y((null==e?void 0:e.message)||"Failed to create wallet")}finally{v(!1)}};return(0,a.jsxs)("div",{className:"space-y-6 pb-24",children:["form"===o&&(0,a.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Create Wallet"}),(0,a.jsx)("p",{className:"text-white/70 text-sm",children:"Set a password to encrypt your secret phrase on this device."}),(0,a.jsx)("input",{type:"password",className:"w-full bg-white/5 border border-white/10 rounded-lg px-3 py-3 outline-none focus:border-[#a58cff]",placeholder:"New password (min 6 chars)",value:i,onChange:e=>c(e.target.value)}),w&&(0,a.jsx)("div",{className:"text-[12px] text-red-400",children:w}),(0,a.jsx)("button",{disabled:b||i.length<6,className:"w-full btn disabled:opacity-50",children:b?"Creating...":"Create"})]}),"show"===o&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Save Your Secret Phrase"}),(0,a.jsx)("div",{className:"text-white/70 text-sm",children:"Write these 12 words down in order and store them safely. Anyone with them can control your funds."}),(0,a.jsx)("div",{className:"glass rounded-xl p-4 border border-white/5 font-mono text-sm leading-7 select-all",children:d}),(0,a.jsxs)("div",{className:"text-xs text-white/60",children:["Address: ",(0,a.jsx)("span",{className:"font-mono break-all",children:f})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:x,onChange:e=>p(e.target.checked)}),"I saved my secret phrase."]}),(0,a.jsx)("button",{disabled:!x,onClick:async()=>{try{await s(i)}catch(e){}e.replace("/")},className:"w-full btn disabled:opacity-50",children:"Continue"})]})]})}},9265:function(e,t,s){"use strict";s.d(t,{Ek:function(){return d},Os:function(){return u},nS:function(){return o}});var a=s(7437),n=s(2265),r=s(8870),l=s.n(r),i=s(3861);let c=(0,n.createContext)(null);function o(e){let{children:t}=e,[r,o]=(0,n.useState)(null),[u,d]=(0,n.useState)(null),[h,f]=(0,n.useState)((0,i.Ru)()),[m,x]=(0,n.useState)(!1),[p,w]=(0,n.useState)(!1),[y,b]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=(0,i.MI)();e?(o(e.pubkey),w(!0)):w(!1),f((0,i.Ru)()),(0,i.SX)().then(x).catch(()=>x(!1)),(async()=>{try{if((null==e?void 0:e.scheme)==="device"){let e=await (0,i.s6)();d(e),f(!0)}}catch(e){}})();let t=()=>{let e=(0,i.MI)();e&&(o(e.pubkey),w(!0))};return window.addEventListener("dope:store",t),()=>{window.removeEventListener("dope:store",t)}},[]),(0,n.useEffect)(()=>{b(!0)},[]);let v=async e=>{let t=await (0,i.Z9)(e);return o(t.address),w(!0),t},N=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"phantom",a=arguments.length>3?arguments[3]:void 0,n="string"==typeof s&&s.startsWith("m/"),r=n?await (0,i.ir)(e,t,s,a):await (0,i.o4)(e,t,s,a);return o(r.address),w(!0),r},S=async(e,t)=>{let a=null,n=e.trim();try{if(n.startsWith("[")){let e=JSON.parse(n);Array.isArray(e)&&(a=new Uint8Array(e.map(e=>Number(e))))}else if(/^[A-Za-z0-9+/=]+$/.test(n)&&n.includes("=")){let e=atob(n),t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);a=t}else/^[1-9A-HJ-NP-Za-km-z]+$/.test(n)&&(a=l().decode(n))}catch(e){}if(!a)throw Error("Invalid keypair input. Paste JSON array, base58, or base64 secret key.");let{importWalletFromSecretKey:r}=await Promise.resolve().then(s.bind(s,3861)),i=await r(a,t);return o(i.address),w(!0),i},g=async e=>{let t=await (0,i.fK)(e);d(t),f(!0)},j=async()=>{if(!m)return!1;let e=await (0,i.B9)();return!!(e&&(0,i.Ru)())&&(f(!0),!0)};return(0,a.jsx)(c.Provider,{value:{address:r,unlocked:h,keypair:u,hasWallet:p,ready:y,createWallet:v,importWallet:N,importKeypair:S,unlock:g,tryBiometricUnlock:j,lock:()=>{d(null),f(!1)},logout:()=>{d(null),(0,i.QD)(),f(!1),o(null),w(!1)}},children:t})}function u(){let e=(0,n.useContext)(c);if(!e)throw Error("useWallet must be used within WalletProvider");return e}function d(){return(0,n.useContext)(c)}},4033:function(e,t,s){e.exports=s(8165)}},function(e){e.O(0,[814,727,711,971,596,744],function(){return e(e.s=7190)}),_N_E=e.O()}]);